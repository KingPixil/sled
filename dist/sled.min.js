/**
 * Sled v0.0.0
 * Copyright 2017 Kabir Shah
 * Released under the MIT License
 * https://github.com/KingPixil/sled
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Sled=t()}(this,function(){function e(e){this.el=document.querySelector(e),this.data={type:"ROOT",index:null,parent:null,children:[],node:null};var t=d(0,this.data);this.data.children=[t],this.el.appendChild(o(t)),this.el.setAttribute("contenteditable","true"),this.el.setAttribute("class","sled-editor");var n=this;this.el.addEventListener("keypress",function(e){e.preventDefault(),n.editText(e)}),this.el.addEventListener("keydown",function(e){n.editAction(e)})}var t=document.createElement("style");t.appendChild(document.createTextNode(".sled-editor {white-space: pre-wrap;}")),document.head.appendChild(t);var n=function(e,t,n,d,o){return void 0===t?{type:e,index:n,parent:d,children:o,node:null}:{type:e,index:n,parent:d,content:t,children:o,node:null}},d=function(e,t){var d=n("p",void 0,e,t,[]),o=n("br",void 0,0,d,[]);return d.children=[o],d},o=function(e){var t=e.type,n=e.children,d=null;if("#text"===t){var r=e.content;d=document.createTextNode(r)}else if(d=document.createElement(e.type),0!==n.length)for(var i=0;i<n.length;i++)d.appendChild(o(n[i]));return e.node=d,d.__SLED__VNODE__=e,d},r=function(e,t,n){var d=document.createRange();d.setStart(e,t),d.setEnd(e,t),n.removeAllRanges(),n.addRange(d)},i=function(e,t){var n=document.createRange();n.selectNodeContents(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n)},a=function(e,t){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)};return e.prototype.editText=function(e){var t=document.getSelection(),l=t.anchorNode,c=t.anchorOffset,s=t.focusNode,u=t.focusOffset;if(1===l.nodeType&&(l=l.firstChild),1===s.nodeType&&(s=s.firstChild),c>u){var p=c;c=u,u=p}var h=l.parentNode;s.parentNode;if(13===e.keyCode){if(l===s&&!0===t.isCollapsed){var f=l.__SLED__VNODE__.parent.parent,v=f.children,_=l.parentNode,m=(_.parentNode,null);if(null===_.nextSibling){var g=d(v.length,f);v.push(g),m=o(g),_.parentNode.appendChild(m)}i(m,t)}}else{var y=e.key;if(l===s)if("BR"===l.nodeName){var N=h.__SLED__VNODE__,C=n("#text",y,0,N,[]);N.children[0]=C;var x=o(C);h.removeChild(l),h.appendChild(x),a(x,t)}else{var E=l.__SLED__VNODE__,R=E.content,D=R.substring(0,c)+y+R.substring(u);E.content=D,l.textContent=D,r(l,c+1,t)}}},e.prototype.editAction=function(e){},e.version="0.0.0",e});