/**
 * Sled v0.0.0
 * Copyright 2017 Kabir Shah
 * Released under the MIT License
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Sled=t()}(this,function(){function e(e){this.el=document.querySelector(e),this.el.appendChild(n(t("p","",[t("br","",[])]))),this.el.setAttribute("contenteditable","true"),this.el.setAttribute("data-sled","");var o=this;this.el.addEventListener("keypress",function(e){o.editText(e)}),this.el.addEventListener("paste",function(e){o.formatPaste(e)}),this.el.addEventListener("keydown",function(e){o.editAction(e)})}var t=function(e,t,n){return{type:e,content:t,children:n}},n=function(e,t){var o=e.type,r=e.children,i=null;if("#text"===o)i=document.createTextNode(e.content);else if(i=document.createElement(e.type),0!==r.length)for(var d=0;d<r.length;d++)i.appendChild(n(r[d]));return i},o=function(e){return 3===e.nodeType?e.parentNode:e},r=function(e,t){for(var o=0;o<t.length;o++)e.appendChild(n(t[o]))},i=function(e){for(var t=null;null!==(t=e.firstChild);)e.removeChild(t)},d=function(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n)};return e.prototype.formatPaste=function(e){},e.prototype.editText=function(e){if(" "===String.fromCharCode(e.keyCode)){var t=document.getSelection(),n=t.focusNode,r=o(n),i=t.focusOffset,d=n.textContent,l=d.length;if("#"===d[0]&&"#"===d[i-1]){for(var a=d[0],c=1,u=1,f=!1;"#"===a&&c<l;){if(" "===a){f=!0;break}u++,a=d[c++]}if(!1===f&&u<7){e.preventDefault();var s=document.createElement("h"+u.toString()),p=d.substring(u);0===p.length?s.appendChild(document.createElement("br")):s.textContent=p,r.parentNode.replaceChild(s,r)}}}},e.prototype.editAction=function(e){if(13===e.keyCode){var t=document.getSelection(),n=t.focusNode,r=(o(n),n.textContent),i=r.length,l=t.focusOffset,a=t.anchorOffset;if(l>a){var c=l;l=a,a=c}if(n===t.anchorNode){e.preventDefault();var u="",f=r.substring(a,i);0!==r.length&&(u=r.substring(0,l)),r!==u&&(n.textContent=u);var s=document.createElement("p");0===f.length?s.appendChild(document.createElement("br")):s.textContent=f;for(var p=this.el,h=n;h.parentNode!==p;)h=h.parentNode;p.insertBefore(s,h.nextSibling),d(s)}}},e.prototype.load=function(e){var t=this.el;i(t),r(t,e)},e.prototype.data=function(e){void 0===e&&(e=this.el);for(var n=[],o=e.firstChild;null!==o;){var r=null;r="#text"===o.nodeName?t("#text",o.textContent,[]):t(o.nodeName.toLowerCase(),"",this.data(o)),n.push(r),o=o.nextSibling}return n},e.version="0.0.0",e});