/**
 * Sled v0.0.0
 * Copyright 2017 Kabir Shah
 * Released under the MIT License
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Sled=t()}(this,function(){function e(e){this.el=document.querySelector(e),this.el.appendChild(n(t("p","",[t("br","",[])]))),this.el.setAttribute("contenteditable","true"),this.el.setAttribute("data-sled","");var o=this;this.el.addEventListener("keypress",function(e){o.editText(String.fromCharCode(e.keyCode))}),this.el.addEventListener("paste",function(e){o.editText(e.clipboardData.getData("Text"))}),this.el.addEventListener("keydown",function(e){o.editAction(e)})}var t=function(e,t,n){return{type:e,content:t,children:n}},n=function(e,t){var o=e.type,i=e.children,r=null;if("#text"===o)r=document.createTextNode(e.content);else if(r=document.createElement(e.type),0!==i.length)for(var l=0;l<i.length;l++)r.appendChild(n(i[l]));return r},o=function(e,t){for(var i=0;i<t.length;i++){var r=t[i],l=n(r);e.appendChild(l),0!==r.children.length&&o(l,r.children)}},i=function(e){for(var t=null;null!==(t=e.firstChild);)e.removeChild(t)},r=function(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)};return e.prototype.editText=function(e){},e.prototype.editAction=function(e){var t=this.el;if(13===e.keyCode){var n=document.getSelection(),o=n.focusNode,i=3===o.nodeType?o.parentNode:o,l=o.textContent,d=l.length,a=n.focusOffset,c=n.anchorOffset;if(a>c){var s=a;a=c,c=s}if(o===n.anchorNode){e.preventDefault();var u="",f=l.substring(c,d);0!==l.length&&(u=l.substring(0,a)),l!==u&&(o.textContent=u);var h=document.createElement(a===d?"p":i.nodeName.toLowerCase());0===f.length?h.appendChild(document.createElement("br")):h.textContent=f,t.insertBefore(h,i.nextSibling),r(h)}}},e.prototype.load=function(e){i(this.el),o(this.el,e)},e.prototype.data=function(e){void 0===e&&(e=this.el);for(var n=[],o=e.firstChild;null!==o;){var i=null;i="#text"===o.nodeName?t("#text",o.textContent,[]):t(o.nodeName.toLowerCase(),"",this.data(o)),n.push(i),o=o.nextSibling}return n},e.version="0.0.0",e});