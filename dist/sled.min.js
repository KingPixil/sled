/**
 * Sled v0.0.0
 * Copyright 2017 Kabir Shah
 * Released under the MIT License
 * https://github.com/KingPixil/sled
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Sled=t()}(this,function(){function e(e){this.el=document.querySelector(e),this.data={type:"ROOT",index:null,parent:null,children:[],node:null};var t=d(0,this.data);this.data.children=[t],this.el.appendChild(r(t)),this.el.setAttribute("contenteditable","true"),this.el.setAttribute("class","sled-editor");var n=this;this.el.addEventListener("keypress",function(e){e.preventDefault(),n.editText(e)}),this.el.addEventListener("keydown",function(e){n.editAction(e)})}var t=document.createElement("style");t.appendChild(document.createTextNode(".sled-editor {white-space: pre-wrap;}")),document.head.appendChild(t);var n=function(e,t,n,d,r){return void 0===t?{type:e,index:n,parent:d,children:r,node:null}:{type:e,index:n,parent:d,content:t,children:r,node:null}},d=function(e,t){var d=n("p",void 0,e,t,[]),r=n("br",void 0,0,d,[]);return d.children=[r],d},r=function(e){var t=e.type,n=e.children,d=null;if("#text"===t){var o=e.content;d=document.createTextNode(o)}else if(d=document.createElement(e.type),0!==n.length)for(var i=0;i<n.length;i++)d.appendChild(r(n[i]));return e.node=d,d.__SLED__VNODE__=e,d},o=function(e,t,n){var d=document.createRange();d.setStart(e,t),d.setEnd(e,t),n.removeAllRanges(),n.addRange(d)},i=function(e,t){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)};return e.prototype.editText=function(e){var t=document.getSelection(),a=t.anchorNode,l=t.anchorOffset,c=t.focusNode,s=t.focusOffset;if(1===a.nodeType&&(a=a.firstChild),1===c.nodeType&&(c=c.firstChild),l>s){var p=l;l=s,s=p}var u=a.parentNode;c.parentNode;if(13===e.keyCode){if(a===c&&!0===t.isCollapsed){var h=a.__SLED__VNODE__.parent.parent,f=h.children,v=a.parentNode;v.parentNode;if(null===v.nextSibling){var _=d(f.length,h);f.push(_),v.parentNode.appendChild(r(_))}}}else{var m=e.key;if(a===c)if("BR"===a.nodeName){var y=u.__SLED__VNODE__,N=n("#text",m,0,y,[]);y.children[0]=N;var g=r(N);u.removeChild(a),u.appendChild(g),i(g,t)}else{var x=a.__SLED__VNODE__,C=x.content,E=C.substring(0,l)+m+C.substring(s);x.content=E,a.textContent=E,o(a,l+1,t)}}},e.prototype.editAction=function(e){},e.version="0.0.0",e});