/**
 * Sled v0.0.0
 * Copyright 2017 Kabir Shah
 * Released under the MIT License
 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.Sled=t()}(this,function(){function e(e){this.el=document.querySelector(e),this.el.appendChild(n(t("p","",[t("br","",[])]))),this.el.setAttribute("contenteditable","true"),this.el.setAttribute("data-sled","");var o=this;this.el.addEventListener("keypress",function(e){o.editText(e)}),this.el.addEventListener("paste",function(e){o.formatPaste(e)}),this.el.addEventListener("keydown",function(e){o.editAction(e)})}var t=function(e,t,n){return{type:e,content:t,children:n}},n=function(e,t){var o=e.type,r=e.children,i=null;if("#text"===o)i=document.createTextNode(e.content);else if(i=document.createElement(e.type),0!==r.length)for(var l=0;l<r.length;l++)i.appendChild(n(r[l]));return i},o=function(e){return 3===e.nodeType?e.parentNode:e},r=function(e,t){for(var o=0;o<t.length;o++)e.appendChild(n(t[o]))},i=function(e){for(var t=null;null!==(t=e.firstChild);)e.removeChild(t)},l=function(e){var t=document.getSelection(),n=document.createRange();n.selectNodeContents(e),n.collapse(!0),t.removeAllRanges(),t.addRange(n)};return e.prototype.formatPaste=function(e){},e.prototype.editText=function(e){if(" "===String.fromCharCode(e.keyCode)){var t=document.getSelection(),n=t.focusNode,r=o(n),i=t.focusOffset,l=n.textContent,d=l.length;if("#"===l[0]&&"#"===l[i-1]){for(var a=l[0],c=1,u=1,s=!1;"#"===a&&c<d;){if(" "===a){s=!0;break}u++,a=l[c++]}if(!1===s&&u<7){e.preventDefault();var f=document.createElement("h"+u.toString()),h=l.substring(u);0===h.length?f.appendChild(document.createElement("br")):f.textContent=h,r.parentNode.replaceChild(f,r)}}}},e.prototype.editAction=function(e){var t=this.el;if(13===e.keyCode){var n=document.getSelection(),r=n.focusNode,i=o(r),d=r.textContent,a=d.length,c=n.focusOffset,u=n.anchorOffset;if(c>u){var s=c;c=u,u=s}if(r===n.anchorNode){e.preventDefault();var f="",h=d.substring(u,a);0!==d.length&&(f=d.substring(0,c)),d!==f&&(r.textContent=f);var p=document.createElement("p");0===h.length?p.appendChild(document.createElement("br")):p.textContent=h,t.insertBefore(p,i.nextSibling),l(p)}}},e.prototype.load=function(e){i(this.el),r(this.el,e)},e.prototype.data=function(e){void 0===e&&(e=this.el);for(var n=[],o=e.firstChild;null!==o;){var r=null;r="#text"===o.nodeName?t("#text",o.textContent,[]):t(o.nodeName.toLowerCase(),"",this.data(o)),n.push(r),o=o.nextSibling}return n},e.version="0.0.0",e});